<%
    _lang = data.page.lang || 'en-us'
%>
<!DOCTYPE html lang="<%= _lang %>" xml:lang="<%= _lang %>" xmlns="http://www.w3.org/1999/xhtml">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta http-equiv="Content-Language" content="<%= _lang %>">
        <!-- Use title if it's in the page YAML frontmatter -->
        <title><%= if data.page.language then "Learn " + data.page.language + " in Y Minutes" else "Learn X in Y Minutes: Scenic Programming Language Tours" end %></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/css/normalize.css">
        <link rel="stylesheet" href="/css/main.css">
        <%= stylesheet_link_tag "screen" %>
        <%= stylesheet_link_tag "github" %>
        <link id="pagestyle" rel="stylesheet" href="/css/light.css">

        <link rel="canonical" href="https://learnxinyminutes.com/<%= current_path.gsub('index.html', '') %>">
        <script>
            var theme_cookie_name = "lxiym_theme" ;
            var theme_cookie_duration = 30 ;
            var theme_domain = "learnxinyminutes.com" ;
            function switch_theme(theme_value){
                document.getElementById('pagestyle').setAttribute('href', '/css/'+ theme_value + '.css');
                set_cookie(theme_cookie_name, theme_value, theme_cookie_duration, theme_domain);
            }
            function set_style_from_cookie(){
                var theme_value = get_cookie(theme_cookie_name);
                if (theme_value.length) {
                    switch_theme(theme_value);
                }
            }
            function set_cookie(cookie_name, cookie_value, lifespan_in_days, cookie_domain){
                lifespan_in_seconds = 60 * 60 * 24 * lifespan_in_days;
                document.cookie = cookie_name + "=" + encodeURIComponent(cookie_value) + "; max-age=" + lifespan_in_seconds + "; path=/" + cookie_domain;
            }
            function get_cookie(cookie_name){
                var cookie_string = document.cookie;
                if (cookie_string.length != 0){
                    var cookie_array = cookie_string.split('; ');
                    for (i = 0 ; i < cookie_array.length ; i++) {
                        cookie_value = cookie_array[i].match(theme_cookie_name + '=(.*)');
                        if (cookie_value != null) {
                            return decodeURIComponent(cookie_value[1]);
                        }
                    }
                }
                return '';
            }
        </script>
    </head>
    <body onload="set_style_from_cookie()">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
        <![endif]-->

        <div class="container">
          <%= yield %>
        </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
        <script src="/js/script.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-3525624-21'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
